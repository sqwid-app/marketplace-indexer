module.exports = class Data1689775856580 {
    name = 'Data1689775856580'

    async up(db) {
        await db.query(`CREATE TABLE "bid" ("id" character varying NOT NULL, "bidder" text NOT NULL, "value" numeric NOT NULL, "timestamp" numeric NOT NULL, "block_height" integer NOT NULL, "position_id" character varying, CONSTRAINT "PK_ed405dda320051aca2dcb1a50bb" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_0bc64f6f0a7511116a8f9bfe84" ON "bid" ("position_id") `)
        await db.query(`CREATE INDEX "IDX_2d13c4fe8d2fbc5990cb9f979b" ON "bid" ("bidder") `)
        await db.query(`CREATE INDEX "IDX_40c73319cb587029327fd0d425" ON "bid" ("block_height") `)
        await db.query(`CREATE TABLE "raffle_entry" ("id" character varying NOT NULL, "user" text NOT NULL, "value" numeric NOT NULL, "timestamp" numeric NOT NULL, "block_height" integer NOT NULL, "position_id" character varying, CONSTRAINT "PK_b44663d6fb5a10b340e3a2fb027" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_86dc8fdc6b23d646626ca6ea35" ON "raffle_entry" ("position_id") `)
        await db.query(`CREATE INDEX "IDX_df2ea570c79574bbba9965e2ed" ON "raffle_entry" ("user") `)
        await db.query(`CREATE INDEX "IDX_390a0cb9e5610b522984ee3724" ON "raffle_entry" ("block_height") `)
        await db.query(`CREATE TABLE "loan_funded" ("id" character varying NOT NULL, "funder" text NOT NULL, "timestamp" numeric NOT NULL, "block_height" integer NOT NULL, "position_id" character varying, CONSTRAINT "PK_2ecce02aa88ff3b85d9429892b5" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_beacf60143ff87c4dce2f212ed" ON "loan_funded" ("position_id") `)
        await db.query(`CREATE INDEX "IDX_322e006e67247237e7186489f1" ON "loan_funded" ("funder") `)
        await db.query(`CREATE INDEX "IDX_e7e4d63ff065a58920a3f9fb65" ON "loan_funded" ("block_height") `)
        await db.query(`CREATE TABLE "position" ("id" character varying NOT NULL, "owner" text NOT NULL, "amount" integer NOT NULL, "price" numeric NOT NULL, "market_fee" numeric NOT NULL, "state" character varying(11), "updated_at" numeric NOT NULL, "item_id" character varying, CONSTRAINT "PK_b7f483581562b4dc62ae1a5b7e2" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_0d4c89e4a4fbd5d1fb02618638" ON "position" ("item_id") `)
        await db.query(`CREATE INDEX "IDX_23adf266f9075e2b4c68e650a3" ON "position" ("owner") `)
        await db.query(`CREATE TABLE "sale" ("id" character varying NOT NULL, "seller" text NOT NULL, "buyer" text NOT NULL, "price" numeric NOT NULL, "amount" integer NOT NULL, "timestamp" numeric NOT NULL, "block_height" integer NOT NULL, "item_id" character varying, CONSTRAINT "PK_d03891c457cbcd22974732b5de2" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_439a57a4a0d130329d3d2e671b" ON "sale" ("item_id") `)
        await db.query(`CREATE INDEX "IDX_3cd3366d2c0c6e1484ebb3520b" ON "sale" ("seller") `)
        await db.query(`CREATE INDEX "IDX_52a5d0b75a305496a326d4f2f6" ON "sale" ("buyer") `)
        await db.query(`CREATE INDEX "IDX_a9df33023d35617d57aaba7c0d" ON "sale" ("block_height") `)
        await db.query(`CREATE TABLE "item" ("id" character varying NOT NULL, "nft_contract" text NOT NULL, "token_id" integer NOT NULL, "creator" text NOT NULL, "created_at" numeric NOT NULL, CONSTRAINT "PK_d3c0c71f23e7adcf952a1d13423" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_d9eed27e6d27415f951992ea9c" ON "item" ("nft_contract") `)
        await db.query(`CREATE INDEX "IDX_c309364ba567d8e5b5384a76ba" ON "item" ("token_id") `)
        await db.query(`CREATE INDEX "IDX_76d5622172eecc8095cce2419e" ON "item" ("creator") `)
        await db.query(`CREATE TABLE "balance" ("id" character varying NOT NULL, "balance" numeric NOT NULL, CONSTRAINT "PK_079dddd31a81672e8143a649ca0" PRIMARY KEY ("id"))`)
        await db.query(`ALTER TABLE "bid" ADD CONSTRAINT "FK_0bc64f6f0a7511116a8f9bfe84a" FOREIGN KEY ("position_id") REFERENCES "position"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "raffle_entry" ADD CONSTRAINT "FK_86dc8fdc6b23d646626ca6ea35b" FOREIGN KEY ("position_id") REFERENCES "position"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "loan_funded" ADD CONSTRAINT "FK_beacf60143ff87c4dce2f212ed3" FOREIGN KEY ("position_id") REFERENCES "position"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "position" ADD CONSTRAINT "FK_0d4c89e4a4fbd5d1fb02618638c" FOREIGN KEY ("item_id") REFERENCES "item"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "sale" ADD CONSTRAINT "FK_439a57a4a0d130329d3d2e671b6" FOREIGN KEY ("item_id") REFERENCES "item"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "bid"`)
        await db.query(`DROP INDEX "public"."IDX_0bc64f6f0a7511116a8f9bfe84"`)
        await db.query(`DROP INDEX "public"."IDX_2d13c4fe8d2fbc5990cb9f979b"`)
        await db.query(`DROP INDEX "public"."IDX_40c73319cb587029327fd0d425"`)
        await db.query(`DROP TABLE "raffle_entry"`)
        await db.query(`DROP INDEX "public"."IDX_86dc8fdc6b23d646626ca6ea35"`)
        await db.query(`DROP INDEX "public"."IDX_df2ea570c79574bbba9965e2ed"`)
        await db.query(`DROP INDEX "public"."IDX_390a0cb9e5610b522984ee3724"`)
        await db.query(`DROP TABLE "loan_funded"`)
        await db.query(`DROP INDEX "public"."IDX_beacf60143ff87c4dce2f212ed"`)
        await db.query(`DROP INDEX "public"."IDX_322e006e67247237e7186489f1"`)
        await db.query(`DROP INDEX "public"."IDX_e7e4d63ff065a58920a3f9fb65"`)
        await db.query(`DROP TABLE "position"`)
        await db.query(`DROP INDEX "public"."IDX_0d4c89e4a4fbd5d1fb02618638"`)
        await db.query(`DROP INDEX "public"."IDX_23adf266f9075e2b4c68e650a3"`)
        await db.query(`DROP TABLE "sale"`)
        await db.query(`DROP INDEX "public"."IDX_439a57a4a0d130329d3d2e671b"`)
        await db.query(`DROP INDEX "public"."IDX_3cd3366d2c0c6e1484ebb3520b"`)
        await db.query(`DROP INDEX "public"."IDX_52a5d0b75a305496a326d4f2f6"`)
        await db.query(`DROP INDEX "public"."IDX_a9df33023d35617d57aaba7c0d"`)
        await db.query(`DROP TABLE "item"`)
        await db.query(`DROP INDEX "public"."IDX_d9eed27e6d27415f951992ea9c"`)
        await db.query(`DROP INDEX "public"."IDX_c309364ba567d8e5b5384a76ba"`)
        await db.query(`DROP INDEX "public"."IDX_76d5622172eecc8095cce2419e"`)
        await db.query(`DROP TABLE "balance"`)
        await db.query(`ALTER TABLE "bid" DROP CONSTRAINT "FK_0bc64f6f0a7511116a8f9bfe84a"`)
        await db.query(`ALTER TABLE "raffle_entry" DROP CONSTRAINT "FK_86dc8fdc6b23d646626ca6ea35b"`)
        await db.query(`ALTER TABLE "loan_funded" DROP CONSTRAINT "FK_beacf60143ff87c4dce2f212ed3"`)
        await db.query(`ALTER TABLE "position" DROP CONSTRAINT "FK_0d4c89e4a4fbd5d1fb02618638c"`)
        await db.query(`ALTER TABLE "sale" DROP CONSTRAINT "FK_439a57a4a0d130329d3d2e671b6"`)
    }
}
